<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="color-scheme" content="light dark" />
	<title>Harmoneasy</title>
	<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
	<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
	<link rel="shortcut icon" href="/favicon.ico" />
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
	<meta name="apple-mobile-web-app-title" content="Harmoneasy" />
	<link rel="manifest" href="/site.webmanifest" />
</head>

<body>

	<dialog open closeby="any">
		<a class="backlink float-left" href="/">
			<img class="logo" src="/source/assets/logos/harmoneasy.svg" alt="">
		</a>
		<h1 class="h2">Harmoneasy</h1>
		<h2 class="h2">Putting the Unity in Community</h2>
		<p aria-summary>Harmoneasy is a web-based music jamming platform that allows you
			to play with friends and mix it together and tranform it to be in key and in time. 
			The transformers remix in real-time and can warp, quantise, synch timings, 
			you can transpose into a shared key or add melodic harmonies.
		</p>
		<p><strong>Note:</strong> this software requires WebMIDI or Bluetooth which your bowser will request your permission for - please press 'accept' to allow it.</p>
		<form method="dialog">
			<!-- <button class="btn-close" type="submit">Begin</button> -->
			<button autofocus class="btn-start primary cta" type="submit">Start</button>
		</form>
	</dialog>

	<header class="header-main">
		<a class="backlink" href="/">
			<img class="logo" src="/source/assets/logos/harmoneasy.svg" alt="">
			<p class="h2">Harmoneasy</p>
		</a>
		
		<menu class="header-controls">

			<label id="volume-control" class="controls">
				Volume:
				<input id="volume" type="range" min=0 max=100 value=100>
				<output id="volume-output">100</output> %
				<button type="button" id="btn-volume-down" class="btn-volume-control" title="Decrease volume">−</button>
				<button type="button" id="btn-volume-up" class="btn-volume-control" title="Increase volume">+</button>
			</label>

			<label id="tempo-control" class="controls">
				Tempo:
				<input id="tempo" type="range" min=10 max=303>
				<output id="bpm"></output> BPM
				<button type="button" id="btn-tempo-down" class="btn-tempo-control" title="Decrease tempo">−</button>
				<button type="button" id="btn-tempo-up" class="btn-tempo-control" title="Increase tempo">+</button>
			</label>

		</menu>

	</header>

	<main>

		<menu id="action-bar">
			<button id="btn-import" class="btn-import primary" type="button">Import</button>
			<button id="btn-export" class="btn-export primary" type="button">Export</button>
			<label for="btn-toggle-layout">
				<select id="btn-toggle-layout" class="btn-toggle-layout" title="Select layout mode">
					<option value="vertical">Vertical</option>
					<option value="horizontal">Horizontal</option>
				</select>
			</label>
			<button id="btn-kill-switch" class="btn-kill-switch primary" type="button">Panic</button>
		</menu>

		<div id="chain">
			<div id="graph"></div>
			<div id="onscreen-keyboard"></div>
		</div>

		<canvas id="note-visualiser" width="1080" height="512"></canvas>
		<!-- <song-explorer></song-explorer> -->
		<!-- <canvas id="song-explorer" width="1920" height="1080"></canvas> -->
	
		<div id="transport">
			<strong aria-hide>Timer</strong>
			<time id="clock" aria-hide>...</time>
			<button type="button" id="btn-reset" class="icon btn-reset">Reset</button>
		</div>

	</main>
	
	<!-- Sidebars for MIDI Events -->
	<aside id="sidebar">

		<header id="sidebar-header">
			<h4>MIDI Events</h4>
			<button type="button" id="sidebar-close" class="btn-close">Hide MIDI Events</button>
		</header>

		<div id="sidebar-content">
			<output id="midi-devices"></output>
			<output id="midi-input-commands"></output>
			<output id="midi-output-commands"></output>

			<div id="ble-manual-send-fieldset" hidden>
				<legend>Manual BLE Send</legend>

				<label for="midi-channel-selector">BLE MIDI Channel:
					<select id="midi-channel-selector">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5</option>
						<option value="6">6</option>
						<option value="7">7</option>
						<option value="8">8</option>
						<option value="9">9</option>
						<option value="10">10</option>
						<option value="11">11</option>
						<option value="12">12</option>
						<option value="13">13</option>
						<option value="14">14</option>
						<option value="15">15</option>
						<option value="16">16</option>
					</select>
				</label>

				<label for="ble-manual-input">Manual BLE Send
					<input id="ble-manual-input" type="text" placeholder="Enter bytes e.g. 144,60,127">
				</label>

				<button type="button" id="btn-send-ble-manual">Send BLE</button>
			</div>
		</div>

	</aside>

	<!-- Overlays -->
	<dialog id="info-dialog" closedby="any" hidden aria-labelledby="info-dialog-title" aria-describedby="info-message">
		<header>
			<h5 id="info-dialog-title">Information</h5>
		</header>
		<pre id="info-message" class="selectable" role="status" aria-live="polite"></pre>
		<form method="dialog">
			<button class="btn-close" type="submit" formmethod="dialog">
				Close
			</button>
		</form>
	</dialog>

	<dialog id="error-dialog" hidden closedby="any" aria-labelledby="error-dialog-title" aria-describedby="error-message">
		<header>
			<h5 id="error-dialog-title">Error</h5>
		</header>
		<div role="alert">
			<p id="error-message"></p>
			<p id="error-solution"></p>
		</div>
		<form method="dialog">
			<button autofocus class="btn-close" type="submit" formmethod="dialog">
				Close
			</button>
		</form>
	</dialog>

	<dialog id="export-dialog" hidden closedby="any" aria-labelledby="export-dialog-title">
		<header>
			<h5 id="export-dialog-title">Export</h5>	
		</header>
		<menu id="export-options" class="export-menu">
			<button type="button" id="btn-audiotool-export" class="export-option">
				<img src="source/assets/logos/audiotool.svg" alt="AudioTool" class="logo-inline">
				Open in AudioTool
			</button>
			<button type="button" id="btn-opendaw-export" class="export-option">
				<img src="source/assets/logos/opendaw.svg" alt="OpenDAW" class="logo-inline">
				Open in OpenDAW
			</button>

			<hr>

			<button type="button" id="btn-midi-export" class="export-option">Export as MIDI file</button>
			<button type="button" id="btn-med-export" class="export-option">Export as ProTracker MED</button>
			<button type="button" id="btn-dawproject-export" class="export-option">Export as .dawProject</button>
			<button type="button" id="btn-midi-markdown-export" class="export-option">Export as Markdown</button>
			<button type="button" id="btn-musicxml-export" class="export-option">Export to MusicXML</button>
			<button type="button" id="btn-vexflow-export" class="export-option">Download Sheet Music</button>
		</menu>
		<form method="dialog">
			<button autofocus class="btn-close" type="submit" formmethod="dialog">
				Close
			</button>
		</form>
	</dialog>

	<dialog id="export-overlay" class="export-overlay" hidden>
		<header>
			<h5>Exporting...</h5>
		</header>
		<p>Please wait while we create your project</p>
	</dialog>

	<footer>
		<small>© 2026 </small>
	</footer>

	<!-- Input Manager -->
	<template id="add-input-overlay-template">
		<dialog closedby="any">
			<header>
				<h5>Add Input</h5>
			</header>
			<!-- Shows a collection of buttons to allow selection -->
			<menu>

			</menu>
			<form method="dialog">
				<button class="btn-close" type="submit" formmethod="dialog">
					Close
				</button>
			</form>
		</dialog>
	</template>

	<!-- Output Manager -->
	<template id="add-output-overlay-template">
		<dialog closedby="any">
			<header>
				<h5>Add Output</h5>
			</header>
			<!-- Shows a collection of buttons to allow selection -->	
			<menu>
				
			</menu>
			<form method="dialog">
				<button class="btn-close" type="submit" formmethod="dialog">
					Close
				</button>
			</form>
		</dialog>
	</template>

	<!-- Instrument Manager -->
	<template id="add-instrument-overlay-template">
		<dialog closedby="any">
			<header>
				<h5>Add Instrument</h5>
			</header>
			<!-- Shows a collection of buttons to allow selection -->	
			<menu>
				
			</menu>
			<form method="dialog">
				<button class="btn-close" type="submit" formmethod="dialog">
					Close
				</button>
			</form>
		</dialog>
	</template>

	<!-- Importer -->
	<template id="import-overlay-template">
		<div class="import-overlay" hidden>
			<div class="import-overlay-content">
				<div class="spinner"></div>
				<h5>Importing...</h5>
				<p>Please wait while we load your data.</p>
			</div>
		</div>
	</template>

	<!-- Exporter -->
	<template id="export-overlay-template">
		<div class="export-overlay" hidden>
			<div class="export-overlay-content">
				<div class="spinner"></div>
				<h5>Exporting...</h5>
				<p>Please wait while we create your project.</p>
			</div>
		</div>
	</template>

	<template id="error-overlay-template">
		<dialog hidden closedby="any" aria-labelledby="error-dialog-title" aria-describedby="error-message">
			<header>
				<h5 class="error-title">Error</h5>
			</header>
			<div role="alert">
				<p class="error-message"></p>
				<p class="error-solution"></p>
			</div>
			<form method="dialog">
				<button autofocus class="btn-close" type="submit" formmethod="dialog">
					Close
				</button>
			</form>
		</dialog>

	</template>

	<script type="module" src="/source/index.ts"></script>
</body>

</html>